@using GF.Web.Models
@model MaterialAvailabilityViewModel

@{
    ViewBag.Title = "Material Availability Server Side";
}

<h2>Material Availability (Server-side)</h2>

<div id="dynamic">
    <table id="orderHistory" width="100%">
        <thead>
            <tr>
                @foreach(var item in Model.Columns){
                    <th>@item.DisplayName</th>
                } 
            </tr>
        </thead>
        <tbody></tbody>
        <tfoot></tfoot>
    </table>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        //http://www.datatables.net
        $('#orderHistory').dataTable({
            //"sDom": "rt",        
            "sPaginationType": "full_numbers",
            "bProcessing": true,
            "bServerSide": true,
            "sAjaxSource": '@Url.Content("~/Home/GetMaterialAvailability")', 
            "fnServerData": function (url, data, callback) {
                $.ajax({
                    "url": url,
                    "data": data,
                    "success": callback,
                    "contentType": "application/x-www-form-urlencoded; charset=utf-8",
                    "dataType": "json",
                    "type": "POST",
                    "cache": false,
                    "error": function () {
                        alert("DataTables warning: JSON data from server failed to load or be parsed. " +
                        "This is most likely to be caused by a JSON formatting error.");
                    }
                });
            } 
          
        });
    });                    
</script>

